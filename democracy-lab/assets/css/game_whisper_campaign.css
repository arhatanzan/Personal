:root {
  --bg-color: #f8f6f2;
  --card-bg: #ffffff;
  --text-main: #0a2342;
  --text-light: #5a6673;
  --accent: #d4a017;
  --danger: #7a2e2e;
  --success: #27ab83;
  --border-color: rgba(10,35,66,0.15);
  --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

* { box-sizing: border-box; }

body { margin:0; padding:0; font-family:var(--font-main); background-color:var(--bg-color); color:var(--text-main); display:flex; flex-direction:column; align-items:center; min-height:100vh; overflow-y:auto; }

header { width:100%; max-width:900px; padding:0.8rem; text-align:center; flex-shrink:0; border-bottom:1px solid var(--border-color); background:var(--bg-color); display:flex; justify-content:space-between; align-items:center; }
.header-content { text-align:center; width:100%; }
h1 { margin:0; font-size:1.1rem; color:var(--text-main); text-transform:uppercase; letter-spacing:1px; }
.subtitle { font-size:0.7rem; color:var(--danger); font-weight:bold; }

.stats-bar { display:flex; justify-content:center; gap:8px; width:95%; max-width:800px; margin:8px 0; flex-shrink:0; }
.stat-box { background:var(--card-bg); padding:5px 10px; border-radius:6px; text-align:center; border:1px solid var(--border-color); box-shadow:0 2px 4px rgba(0,0,0,0.05); flex:1; }
.stat-label { font-size:0.55rem; text-transform:uppercase; color:var(--text-light); font-weight:bold; }
.stat-val { font-size:1rem; font-weight:800; color:var(--text-main); margin-top:2px; }
.stat-val.accent { color:var(--accent); }

.game-container { flex:0 0 auto; display:flex; flex-direction:column; justify-content:flex-start; width:98%; max-width:1000px; gap:10px; padding-bottom:5px; overflow:visible; }
.viz-wrapper { flex:3; position:relative; background:#eef2f6; border-radius:8px; border:1px solid var(--border-color); overflow:hidden; min-height:300px; }
canvas { display:block; width:100%; height:100%; }
.viz-legend { position:static; background:transparent; padding:6px 0; border-radius:4px; font-size:0.75rem; color:var(--text-light); border:none; pointer-events:auto; display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; width:100%; max-width:900px; margin:0 auto 6px auto; }
.legend-item { display:flex; align-items:center; gap:8px; padding:6px 8px; background:var(--card-bg); border:1px solid var(--border-color); border-radius:6px; color:var(--text-main); }
.dot { width:10px; height:10px; border-radius:50%; }

.controls-container { flex:2; display:flex; flex-direction:column; gap:8px; background:var(--card-bg); padding:12px; border-radius:8px; border:1px solid var(--border-color); overflow-y:auto; max-height:45vh; }
.section-header { font-size:0.75rem; font-weight:bold; text-transform:uppercase; color:var(--text-light); margin-bottom:6px; border-bottom:1px solid #eee; padding-bottom:4px; display:flex; justify-content:space-between; }

.narrative-list { display:grid; grid-template-columns:1fr; gap:6px; }
.narrative-opt { padding:10px; border:1px solid var(--border-color); border-radius:6px; cursor:pointer; transition:all 0.1s; text-align:left; background:#fafafa; position:relative; }
.narrative-opt:hover { border-color:var(--accent); background:#fff; }
.narrative-opt.selected { background:#fff9e6; border:2px solid var(--accent); }
.nar-top { display:flex; justify-content:space-between; align-items:center; font-size:0.8rem; font-weight:bold; }
.nar-cost { background:var(--text-main); color:#fff; padding:2px 6px; border-radius:4px; font-size:0.7rem; }
.nar-desc { font-size:0.75rem; color:var(--text-main); margin:4px 0; line-height:1.3; }
.nar-tag { font-size:0.65rem; padding:2px 5px; border-radius:3px; font-weight:bold; text-transform:uppercase; }
.tag-rumor { color:#d64545; background:#ffe3e3; }
.tag-policy { color:#334e68; background:#bcccdc; }
.tag-culture { color:#d4a017; background:#fff4ce; }

.target-select { width:100%; padding:10px; border-radius:4px; border:1px solid var(--border-color); background:#fff; color:var(--text-main); font-size:0.9rem; font-weight:bold; }
.btn-plant { width:100%; padding:12px; background:var(--accent); color:var(--text-main); border:none; border-radius:6px; font-weight:800; font-size:0.9rem; text-transform:uppercase; cursor:pointer; margin-top:12px; box-shadow:0 2px 0 #b38612; }
.btn-plant:disabled { opacity:0.5; cursor:not-allowed; box-shadow:none; background:#ddd; }

@media (min-width:768px) { .game-container { flex-direction:row; height:auto; overflow:visible; align-items:flex-start; } .viz-wrapper { flex:2; height:auto; min-height:300px; overflow:hidden; } .controls-container { flex:1; height:auto; max-height:80vh; overflow-y:auto; } }

.copyright { font-size:0.7rem; color:var(--text-light); opacity:0.6; text-align:center; padding:4px 0 8px 0; flex-shrink:0; }

.modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(10,35,66,0.95); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:1000; color:white; text-align:center; padding:20px; }
.modal.active { display:flex; }
.modal-content { background:white; color:var(--text-main); padding:25px; border-radius:10px; max-width:500px; width:100%; box-shadow:0 10px 30px rgba(0,0,0,0.3); border-top:5px solid var(--danger); }
.modal h2 { color:var(--danger); margin-top:0; text-transform:uppercase; }
.modal p { font-size:0.95rem; line-height:1.5; color:var(--text-light); margin-bottom:20px; text-align:left; }
.btn-modal { background:var(--text-main); color:var(--accent); padding:12px 20px; border:none; border-radius:6px; font-weight:bold; cursor:pointer; width:100%; text-transform:uppercase; }

.tutorial-step { margin-bottom:12px; border-left:3px solid var(--danger); padding-left:10px; text-align:left; font-size:0.9rem; }
.tutorial-step strong { display:block; color:var(--text-main); }

@media (max-width:600px) { .stats-bar, .dashboard { grid-template-columns:1fr; gap:8px; width:95%; margin:0.5rem 0; } .game-container, .game-layout { max-width:100%; padding-bottom:1rem; justify-content:flex-start !important; padding-top:0.25rem; flex:0 0 auto; } .viz-wrapper { max-width:100%; padding-bottom:0.5rem; justify-content:flex-start !important; padding-top:0.25rem; flex:0 0 auto; min-height:420px !important; overflow:visible !important; } .card-stack { height:auto !important; margin-bottom:8px; } .card { position:relative !important; height:auto !important; top:auto !important; left:auto !important; padding:1.25rem; } body { min-height:auto !important; height:auto !important; } .controls-container { max-height:none !important; overflow-y:visible !important; } .controls, .broadcast-slots { gap:8px; padding:8px; justify-content:center; } .btn, .btn-modal { padding:0.6rem; font-size:0.95rem; } .viz-legend { display:none; } header { padding:0.6rem; } }
