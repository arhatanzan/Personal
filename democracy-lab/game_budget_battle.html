<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Budget Battle</title>
    <link rel="stylesheet" href="assets/css/common.css">
    <script src="assets/js/common.js" defer></script>
    <script src="assets/js/game.js" defer></script>
  </head>
  <body>
    <header>
      <h1>Budget Battle</h1>
      <div class="subtitle">Pick your winning allocations</div>
    </header>

    <div class="dashboard">
      <div class="stat-box">
        <span class="stat-label">Budget Left</span>
        <div class="stat-val val-funds" id="val-funds">‚Çπ100 Cr</div>
      </div>
      <div class="stat-box">
        <span class="stat-label">Approval</span>
        <div class="stat-val" id="val-approval">35%</div>
      </div>
      <div class="stat-box">
        <span class="stat-label">Corruption Risk</span>
        <div class="risk-bar-bg">
          <div class="risk-bar-fill" id="val-risk"></div>
        </div>
        <div style="font-size: 0.65rem; margin-top: 4px" id="risk-text">
          Safe
        </div>
      </div>
    </div>

    <div class="deals-wrapper">
      <div class="deals-grid" id="deals-container"></div>
    </div>

    <div class="game-area">
      <div class="sectors-grid" id="sectors-grid"></div>
    </div>

    <div class="footer">
      <div class="reaction-bar" id="reaction-box">
        Media: 'City unsafe at night.'
      </div>
      <button class="btn-submit" id="btn-submit" onclick="finalizeBudget()">
        Finalize Budget
      </button>
      <div class="copyright">¬© 2025 Kaif Abbas</div>
    </div>

    <div class="modal" id="end-modal">
      <div class="modal-content">
        <h2 id="end-title">Result</h2>
        <p id="end-desc" style="line-height: 1.6; font-size: 1rem; color: #555">
          ...
        </p>
        <button class="btn-restart" onclick="location.reload()">
          Play Again
        </button>
      </div>
    </div>

    <script>
      
      const DEALS = [
        { id: "builder", title: "Sell Park", gain: 30, risk: 25 },
        { id: "water", title: "Privatize Water", gain: 25, risk: 20 },
        { id: "corp", title: "Corp Donation", gain: 15, risk: 15 },
        { id: "data", title: "Sell Data", gain: 10, risk: 10 },
      ];

      const SECTORS = [
        { id: "roads", icon: "üöß", name: "Infra & Roads", demand: 40, current: 20, reactions: { low: "RWA: 'Fix the potholes first!'", high: "Contractors: 'Excellent work sir.'" } },
        { id: "police", icon: "üëÆ", name: "Police", demand: 35, current: 10, reactions: { low: "Media: 'City unsafe at night.'", high: "DGP: 'Force modernization on track.'" } },
        { id: "water", icon: "üíß", name: "Water", demand: 30, current: 20, reactions: { low: "Slums: 'Water tanker mafia rules.'", high: "Public: 'Clean water for all!'" } },
        { id: "health", icon: "üè•", name: "Health", demand: 30, current: 20, reactions: { low: "Docs: 'No oxygen in clinics.'", high: "Union: 'Best healthcare in state.'" } },
        { id: "school", icon: "üéì", name: "Education", demand: 25, current: 20, reactions: { low: "Parents: 'School roof leaking.'", high: "Teachers: 'Digital classrooms approved.'" } },
      ];

      window.addEventListener('DOMContentLoaded', function () {
        
        if (typeof createGame === 'function') {
          window.__demo = createGame({ currentBudget: 100, MAX_SLIDER: 60, DEALS: DEALS, SECTORS: SECTORS });
        }
        if (window.SiteHelpers && window.SiteHelpers.sendHeight) {
          window.SiteHelpers.sendHeight();
          if ('ResizeObserver' in window) new ResizeObserver(window.SiteHelpers.sendHeight).observe(document.body);
        }
      });
    </script>
  </body>
</html>
